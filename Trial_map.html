<!DOCTYPE html>
<html>
<head> 
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
  <title>ES Project - maps</title> 
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 

  <style type="text/css">
  html, body { height: 100%; } 
  </style>

  <script type="text/javascript"> 
  var map = null;
  var marker = null;
  var circle = null;
  Number.prototype.toRad = function() {
   return this * Math.PI / 180;
 }

 Number.prototype.toDeg = function() {
   return this * 180 / Math.PI;
 }
 google.maps.LatLng.prototype.destinationPoint = function(brng, dist) {
   dist = dist / 6371;  
   brng = brng.toRad();  

   var lat1 = this.lat().toRad(), lon1 = this.lng().toRad();

   var lat2 = Math.asin(Math.sin(lat1) * Math.cos(dist) + 
    Math.cos(lat1) * Math.sin(dist) * Math.cos(brng));

   var lon2 = lon1 + Math.atan2(Math.sin(brng) * Math.sin(dist) *
    Math.cos(lat1), 
    Math.cos(dist) - Math.sin(lat1) *
    Math.sin(lat2));

   if (isNaN(lat2) || isNaN(lon2)) return null;

   return new google.maps.LatLng(lat2.toDeg(), lon2.toDeg());
 }


 var infowindow = new google.maps.InfoWindow(
 { 
  size: new google.maps.Size(150,50)
});


 function createMarker(latlng, name, html) {
  var contentString = html;
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString); 
    infowindow.open(map,marker);
  });
  google.maps.event.trigger(marker, 'click');    
  marker.setAnimation(google.maps.Animation.BOUNCE);
  var pointA = new google.maps.LatLng(latlng.lat(),latlng.lng());   
  var radius = 300;                                

  var circle = new google.maps.Circle({
   center: pointA,
         radius: radius * 1000,       // Convert to meters
         fillColor: '#FF0000',
         fillOpacity: 0.2,
         map: map
       });
  
  return [marker,circle];
}



function initialize() {

  var myOptions = {
    zoom: 9,
    center: new google.maps.LatLng(17.446118, 78.348741),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });

  google.maps.event.addListener(map, 'click', function(event) {

   if (marker) {
    marker.setMap(null);
    marker = null;
    circle.setMap(null);
    circle = null;
  }
  var items = createMarker(event.latLng, "name", "<b>Location</b><br>"+event.latLng);
  marker = items[0]
  circle = items[1]
});

}


</script> 

</head> 
<body style="margin:0px; padding:0px;" onload="initialize()"> 

  <table border="1"> 
    <tr> 
      <td> 
       <div id="map_canvas" style="width: 700px; height: 600px"></div> 
     </td> 
     <td valign="top" style="width:150px; text-decoration: underline; color: #4444ff;"> 
       <div id="side_bar"></div> 
     </td> 
   </tr> 
 </table> 

</body> 
</html> 
